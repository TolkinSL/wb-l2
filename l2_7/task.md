L2.7
Что выведет программа?

Объяснить работу конвейера с использованием select.

```
package main

import (
  "fmt"
  "math/rand"
  "time"
)

// Создаётся канал "c"  
// В горутине по очереди отправляются значения  
// Между отправками есть случайная пауза  
// После завершения канал закрывается  

func asChan(vs ...int) <-chan int {
  c := make(chan int)
  go func() {
    // Перебираются все переданные значения в слайс vs  
    for _, v := range vs {
      // Отправка значения в канал
      c <- v
      time.Sleep(time.Duration(rand.Intn(1000)) * time.Millisecond)
    }
  
  // После отправки всех значений — закрывается канал  
  close(c)
}()
  
  // Возвращается канал только для чтения  
  return c
}

// объединение двух входных каналов в один  
func merge(a, b <-chan int) <-chan int {
  c := make(chan int)
  go func() {
    for {

      // select выбирает, любой готовый для чтения канал  
      // если готовы оба — выбирается случайный  
      select {

        // Чтение из канала "a"    
        case v, ok := <-a:
          if ok {

            // Если канал ещё открыт передатся значение дальше  
            c <- v
          } else {

            // Если канал закрыт присваиваем nil  
            // Это отключает его из select  
            a = nil
          }
        
        // Чтение из канала "b"  
        case v, ok := <-b:
          if ok {

            // Если канал ещё открыт передатся значение дальше  
            c <- v
          } else {

            // Если канал закрыт присваиваем nil  
            // Это отключает его из select  
            b = nil
          }
        }

        // Если оба канала закрыты, закрывается итоговый канал  
        if a == nil && b == nil {
          close(c)
          return
        }
     }
   }()
  return c
}

  func main() {

    //  каждый запуск программы получает разный seed  
    //  чтобы программа формально вела себя по-разному при запусках  
    rand.Seed(time.Now().Unix())
    a := asChan(1, 3, 5, 7)
    b := asChan(2, 4, 6, 8)

    // Объединение обеих каналов
    c := merge(a, b)

    // Читение из итогового канала
    for v := range c {
    fmt.Print(v)
    // Выведет все числа в случайном порядке: 21436587
  }
}

```